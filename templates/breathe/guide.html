{% extends 'base.html' %}
{% load static %}

{% block title %}{{ technique.name_ru }} - Breathe & Resist{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/guide.css' %}">
{% endblock %}

{% block content %}
<div class="guide-container">
    <!-- Progress Bar (Top) -->
    <div class="progress-section">
        <div class="progress-bar-container">
            <div class="progress-bar-fill" id="progressBar"></div>
        </div>
        <div class="progress-time" id="progressTime">0:00</div>
    </div>

    <!-- Dynamic Text Cue (Upper Center) -->
    <div class="text-cue-section">
        <div class="text-cue" id="textCue">
            {% if technique.breath_origin == 'ABDOMEN' %}
                üßò –ë—Ä—é—à–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
            {% elif technique.breath_origin == 'CHEST' %}
                ü´Å –ì—Ä—É–¥–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
            {% elif technique.breath_origin == 'NOSTRILS' %}
                üëÉ –î—ã—Ö–∞–Ω–∏–µ –Ω–æ—Å–æ–º
            {% elif technique.breath_origin == 'MOUTH' %}
                üëÑ –î—ã—Ö–∞–Ω–∏–µ —Ä—Ç–æ–º
            {% else %}
                üå¨Ô∏è –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥—ã—Ö–∞–Ω–∏–µ
            {% endif %}
        </div>
        <div class="phase-indicator" id="phaseIndicator">–ì–æ—Ç–æ–≤</div>
        <div class="countdown-number" id="countdownNumber"></div>
    </div>

        <!-- Balloon Container (Center) -->
        <div class="visual-section">
            <!-- Breathing Balloon -->
            <div class="balloon-container">
                <div class="breathing-balloon" id="breathingBalloon"></div>
            </div>
        </div>

    <!-- Status Icons (Bottom) -->
    <div class="status-section">
        <div class="status-icon" id="soundStatus">
            <span class="status-icon-emoji">üîä</span>
            <span class="status-icon-label">–ó–≤—É–∫</span>
        </div>
        <div class="status-icon" id="vibrationStatus">
            <span class="status-icon-emoji">üì≥</span>
            <span class="status-icon-label">–í–∏–±—Ä–∞—Ü–∏—è</span>
        </div>
    </div>

    <!-- Control Buttons -->
    <div class="controls-section">
        <button class="control-button pause-button" id="pauseButton">
            <span class="button-icon">‚è∏Ô∏è</span>
            <span class="button-label">–ü–∞—É–∑–∞</span>
        </button>
        <button class="control-button cancel-button" id="cancelButton">
            <span class="button-icon">‚úï</span>
            <span class="button-label">–û—Ç–º–µ–Ω–∞</span>
        </button>
    </div>
</div>

<!-- Technique Data (Hidden, for JavaScript) -->
<script>
    // Pass technique data to JavaScript
    window.techniqueData = {
        id: {{ technique.id }},
        inhale: {{ technique.inhale }},
        hold_start: {{ technique.hold_start }},
        exhale: {{ technique.exhale }},
        hold_end: {{ technique.hold_end }},
        recommended_time_min: {{ technique.recommended_time_min }},
        breath_origin: '{{ technique.breath_origin }}',
        cycle_duration: {{ technique.inhale }} + {{ technique.hold_start }} + {{ technique.exhale }} + {{ technique.hold_end }},
    };
</script>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/breathing-guide.js' %}"></script>
{% endblock %}

